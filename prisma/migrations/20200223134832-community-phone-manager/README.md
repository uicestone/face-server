# Migration `20200223134832-community-phone-manager`

This migration has been generated by Uice Lu at 2/23/2020, 1:48:32 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Community" ADD COLUMN "manager" text   ,
ADD COLUMN "phone" text   ,
ALTER COLUMN "address" DROP NOT NULL,
ALTER COLUMN "address" DROP DEFAULT;

ALTER TABLE "public"."Community" ADD FOREIGN KEY ("manager")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200223110043-env..20200223134832-community-phone-manager
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("PRISMA_DB_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -31,9 +31,11 @@
 model Community {
   id        String     @default(cuid()) @id
   name      String
-  address   String
+  phone     String?
+  address   String?
+  manager   User?      @relation("manager")
   residents Resident[]
   units     Unit[]
   users     User[]
 }
```


